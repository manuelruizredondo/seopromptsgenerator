---
layout: base.njk
---





<div class="section  ptr-200 ">

  <div class="container-global mx-auto">
    <div class="fluid-5-r mb-8 ">
     Prompt collection
    </div>
    <div class="text-16-r mb-24">
      Aprende con los mejores
     </div>
 </div>

  <div class="container-global mx-auto  ">

<div class="row">
  <div class="col-xs-12">

    <h1>Descargar Subtítulos de YouTube</h1>
    <p class="downsub-intro">Pega la URL del vídeo y usa «Abrir en Downsub.com» para descargar subtítulos sin configurar nada. Si tienes API key de YouTube puedes intentar obtenerlos aquí.</p>
    <form id="youtube-form">
      <label for="youtube-url">URL del video de YouTube:</label>
      <input type="url" id="youtube-url" placeholder="https://www.youtube.com/watch?v=VIDEO_ID" required>
      <button type="submit">Obtener subtítulos (con API key)</button>
      <button type="button" id="downsub-external" class="downsub-btn-external">Abrir en Downsub.com</button>
    </form>


    <div id="result"></div>


  
  </div>
</div>

  </div>
</div>

<style>
  .downsub-intro { margin-bottom: 1rem; color: #666; }
  .downsub-btn-external { margin-left: 0.5rem; }
  #result { margin-top: 1rem; min-height: 1.5em; }
</style>
<script>
(function() {
  var YOUTUBE_API_KEY = {{ env.youtube_api_key | dump | safe }};

  function getYouTubeVideoId(url) {
    var regex = /(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/;
    var matches = url.match(regex);
    return matches ? matches[1] : null;
  }

  function showResult(msg, isError) {
    var el = document.getElementById('result');
    if (el) {
      el.textContent = msg;
      el.style.color = isError ? '#c0392b' : '';
    }
  }

  document.getElementById('youtube-form').addEventListener('submit', function(event) {
    event.preventDefault();
    var youtubeUrl = document.getElementById('youtube-url').value.trim();
    var videoId = getYouTubeVideoId(youtubeUrl);
    if (!videoId) {
      showResult('Por favor ingresa una URL válida de YouTube.', true);
      return;
    }
    if (!YOUTUBE_API_KEY || YOUTUBE_API_KEY === 'TU_CLAVE_DE_API_DE_YOUTUBE') {
      showResult('Configura YOUTUBE_API_KEY (Google Cloud Console) para usar esta opción. Mientras tanto usa «Abrir en Downsub.com».', true);
      return;
    }
    showResult('Cargando…');
    getSubtitles(videoId);
  });

  document.getElementById('downsub-external').addEventListener('click', function() {
    var url = document.getElementById('youtube-url').value.trim();
    if (!url) {
      showResult('Escribe primero la URL del vídeo.', true);
      return;
    }
    if (!getYouTubeVideoId(url)) {
      showResult('URL de YouTube no válida.', true);
      return;
    }
    window.open('https://downsub.com/?url=' + encodeURIComponent(url), '_blank');
    showResult('Se ha abierto Downsub.com en una nueva pestaña.');
  });

  function getSubtitles(videoId) {
    var url = 'https://www.googleapis.com/youtube/v3/captions?videoId=' + videoId + '&part=snippet&key=' + encodeURIComponent(YOUTUBE_API_KEY);
    fetch(url)
      .then(function(res) { return res.json(); })
      .then(function(data) {
        if (data.error) {
          showResult('Error API: ' + (data.error.message || data.error.errors?.[0]?.message || 'Revisa tu API key y cuota.'), true);
          return;
        }
        var items = data.items;
        if (!items || !Array.isArray(items) || items.length === 0) {
          showResult('No se encontraron subtítulos para este vídeo.', true);
          return;
        }
        showResult('La descarga de subtítulos con API key requiere OAuth del dueño del vídeo. Usa «Abrir en Downsub.com» para este vídeo.');
      })
      .catch(function(err) {
        showResult('Error de red o de API. Prueba «Abrir en Downsub.com».', true);
        console.error(err);
      });
  }
})();
</script>