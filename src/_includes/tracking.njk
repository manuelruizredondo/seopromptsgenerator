---
layout: base.njk
---

<div class="section ptr-200">
  <div class="container-global mx-auto">
    <div class="fluid-5-r mb-8">Tracking</div>
    <div class="text-16-r mb-24">Bitcoin, oro y acciones — RSI en vista semanal</div>
  </div>

  <div class="container-global mx-auto">
    <div class="row">
      <div class="col-xs-12">
        <h1>Tracking — RSI semanal</h1>
        <p class="tracking-intro">Precio actual y RSI(14) semanal. En <span class="rsi-extreme">rojo</span> cuando está sobrecomprado (RSI ≥ 70) o sobrevendido (RSI ≤ 30).</p>

        <div class="tracking-grid" id="tracking-grid">
          <div class="tracking-card" id="card-btc">
            <div class="tracking-card-header">
              <span class="tracking-asset-name">Bitcoin</span>
              <span class="tracking-symbol">BTC/USDT</span>
            </div>
            <div class="tracking-price" id="price-btc">—</div>
            <div class="tracking-rsi-wrap">
              <span class="tracking-label">RSI semanal (14):</span>
              <span class="tracking-rsi" id="rsi-btc" data-rsi="">—</span>
            </div>
            <div class="tracking-status" id="status-btc"></div>
          </div>

          <div class="tracking-card" id="card-gold">
            <div class="tracking-card-header">
              <span class="tracking-asset-name">Oro</span>
              <span class="tracking-symbol">PAXG/USDT</span>
            </div>
            <div class="tracking-price" id="price-gold">—</div>
            <div class="tracking-rsi-wrap">
              <span class="tracking-label">RSI semanal (14):</span>
              <span class="tracking-rsi" id="rsi-gold" data-rsi="">—</span>
            </div>
            <div class="tracking-status" id="status-gold"></div>
          </div>

          <div class="tracking-card" id="card-eth">
            <div class="tracking-card-header">
              <span class="tracking-asset-name">Ethereum</span>
              <span class="tracking-symbol">ETH/USDT</span>
            </div>
            <div class="tracking-price" id="price-eth">—</div>
            <div class="tracking-rsi-wrap">
              <span class="tracking-label">RSI semanal (14):</span>
              <span class="tracking-rsi" id="rsi-eth" data-rsi="">—</span>
            </div>
            <div class="tracking-status" id="status-eth"></div>
          </div>

        </div>

        <h2 class="tracking-section-title">Acciones</h2>
        <p class="tracking-intro">Precio en tiempo real, cambio diario y RSI(14) semanal. Actualización automática cada 30 s.</p>
        <div class="tracking-grid tracking-grid-stocks" id="tracking-stocks">
          <div class="tracking-card tracking-card-stock" data-symbol="LAC">
            <div class="tracking-card-header">
              <span class="tracking-asset-name">LAC</span>
              <span class="tracking-symbol">Lithium Americas</span>
            </div>
            <div class="tracking-price" id="price-LAC">—</div>
            <div class="tracking-change-wrap" id="change-LAC">—</div>
            <div class="tracking-rsi-wrap">
              <span class="tracking-label">RSI semanal:</span>
              <span class="tracking-rsi" id="rsi-LAC">—</span>
            </div>
            <div class="tracking-status" id="status-LAC"></div>
          </div>
          <div class="tracking-card tracking-card-stock" data-symbol="PYPL">
            <div class="tracking-card-header">
              <span class="tracking-asset-name">PYPL</span>
              <span class="tracking-symbol">PayPal</span>
            </div>
            <div class="tracking-price" id="price-PYPL">—</div>
            <div class="tracking-change-wrap" id="change-PYPL">—</div>
            <div class="tracking-rsi-wrap">
              <span class="tracking-label">RSI semanal:</span>
              <span class="tracking-rsi" id="rsi-PYPL">—</span>
            </div>
            <div class="tracking-status" id="status-PYPL"></div>
          </div>
          <div class="tracking-card tracking-card-stock" data-symbol="URA">
            <div class="tracking-card-header">
              <span class="tracking-asset-name">URA</span>
              <span class="tracking-symbol">Global X Uranium</span>
            </div>
            <div class="tracking-price" id="price-URA">—</div>
            <div class="tracking-change-wrap" id="change-URA">—</div>
            <div class="tracking-rsi-wrap">
              <span class="tracking-label">RSI semanal:</span>
              <span class="tracking-rsi" id="rsi-URA">—</span>
            </div>
            <div class="tracking-status" id="status-URA"></div>
          </div>
          <div class="tracking-card tracking-card-stock" data-symbol="META">
            <div class="tracking-card-header">
              <span class="tracking-asset-name">META</span>
              <span class="tracking-symbol">Meta Platforms</span>
            </div>
            <div class="tracking-price" id="price-META">—</div>
            <div class="tracking-change-wrap" id="change-META">—</div>
            <div class="tracking-rsi-wrap">
              <span class="tracking-label">RSI semanal:</span>
              <span class="tracking-rsi" id="rsi-META">—</span>
            </div>
            <div class="tracking-status" id="status-META"></div>
          </div>
          <div class="tracking-card tracking-card-stock" data-symbol="MSTR">
            <div class="tracking-card-header">
              <span class="tracking-asset-name">MSTR</span>
              <span class="tracking-symbol">MicroStrategy</span>
            </div>
            <div class="tracking-price" id="price-MSTR">—</div>
            <div class="tracking-change-wrap" id="change-MSTR">—</div>
            <div class="tracking-rsi-wrap">
              <span class="tracking-label">RSI semanal:</span>
              <span class="tracking-rsi" id="rsi-MSTR">—</span>
            </div>
            <div class="tracking-status" id="status-MSTR"></div>
          </div>
          <div class="tracking-card tracking-card-stock" data-symbol="STRC">
            <div class="tracking-card-header">
              <span class="tracking-asset-name">STRC</span>
              <span class="tracking-symbol">Sarcos</span>
            </div>
            <div class="tracking-price" id="price-STRC">—</div>
            <div class="tracking-change-wrap" id="change-STRC">—</div>
            <div class="tracking-rsi-wrap">
              <span class="tracking-label">RSI semanal:</span>
              <span class="tracking-rsi" id="rsi-STRC">—</span>
            </div>
            <div class="tracking-status" id="status-STRC"></div>
          </div>
          <div class="tracking-card tracking-card-stock" data-symbol="ORCL">
            <div class="tracking-card-header">
              <span class="tracking-asset-name">ORCL</span>
              <span class="tracking-symbol">Oracle</span>
            </div>
            <div class="tracking-price" id="price-ORCL">—</div>
            <div class="tracking-change-wrap" id="change-ORCL">—</div>
            <div class="tracking-rsi-wrap">
              <span class="tracking-label">RSI semanal:</span>
              <span class="tracking-rsi" id="rsi-ORCL">—</span>
            </div>
            <div class="tracking-status" id="status-ORCL"></div>
          </div>
          <div class="tracking-card tracking-card-stock" data-symbol="UNH">
            <div class="tracking-card-header">
              <span class="tracking-asset-name">UNH</span>
              <span class="tracking-symbol">UnitedHealth</span>
            </div>
            <div class="tracking-price" id="price-UNH">—</div>
            <div class="tracking-change-wrap" id="change-UNH">—</div>
            <div class="tracking-rsi-wrap">
              <span class="tracking-label">RSI semanal:</span>
              <span class="tracking-rsi" id="rsi-UNH">—</span>
            </div>
            <div class="tracking-status" id="status-UNH"></div>
          </div>
          <div class="tracking-card tracking-card-stock" data-symbol="NVAX">
            <div class="tracking-card-header">
              <span class="tracking-asset-name">NVAX</span>
              <span class="tracking-symbol">Novavax</span>
            </div>
            <div class="tracking-price" id="price-NVAX">—</div>
            <div class="tracking-change-wrap" id="change-NVAX">—</div>
            <div class="tracking-rsi-wrap">
              <span class="tracking-label">RSI semanal:</span>
              <span class="tracking-rsi" id="rsi-NVAX">—</span>
            </div>
            <div class="tracking-status" id="status-NVAX"></div>
          </div>
          <div class="tracking-card tracking-card-stock" data-symbol="TSLA">
            <div class="tracking-card-header">
              <span class="tracking-asset-name">TSLA</span>
              <span class="tracking-symbol">Tesla</span>
            </div>
            <div class="tracking-price" id="price-TSLA">—</div>
            <div class="tracking-change-wrap" id="change-TSLA">—</div>
            <div class="tracking-rsi-wrap">
              <span class="tracking-label">RSI semanal:</span>
              <span class="tracking-rsi" id="rsi-TSLA">—</span>
            </div>
            <div class="tracking-status" id="status-TSLA"></div>
          </div>
          <div class="tracking-card tracking-card-stock" data-symbol="PANW">
            <div class="tracking-card-header">
              <span class="tracking-asset-name">PANW</span>
              <span class="tracking-symbol">Palo Alto Networks</span>
            </div>
            <div class="tracking-price" id="price-PANW">—</div>
            <div class="tracking-change-wrap" id="change-PANW">—</div>
            <div class="tracking-rsi-wrap">
              <span class="tracking-label">RSI semanal:</span>
              <span class="tracking-rsi" id="rsi-PANW">—</span>
            </div>
            <div class="tracking-status" id="status-PANW"></div>
          </div>
          <div class="tracking-card tracking-card-stock" data-symbol="AMZN">
            <div class="tracking-card-header">
              <span class="tracking-asset-name">AMZN</span>
              <span class="tracking-symbol">Amazon</span>
            </div>
            <div class="tracking-price" id="price-AMZN">—</div>
            <div class="tracking-change-wrap" id="change-AMZN">—</div>
            <div class="tracking-rsi-wrap">
              <span class="tracking-label">RSI semanal:</span>
              <span class="tracking-rsi" id="rsi-AMZN">—</span>
            </div>
            <div class="tracking-status" id="status-AMZN"></div>
          </div>
          <div class="tracking-card tracking-card-stock" data-symbol="ASML">
            <div class="tracking-card-header">
              <span class="tracking-asset-name">ASML</span>
              <span class="tracking-symbol">ASML Holding</span>
            </div>
            <div class="tracking-price" id="price-ASML">—</div>
            <div class="tracking-change-wrap" id="change-ASML">—</div>
            <div class="tracking-rsi-wrap">
              <span class="tracking-label">RSI semanal:</span>
              <span class="tracking-rsi" id="rsi-ASML">—</span>
            </div>
            <div class="tracking-status" id="status-ASML"></div>
          </div>
          <div class="tracking-card tracking-card-stock" data-symbol="NKE">
            <div class="tracking-card-header">
              <span class="tracking-asset-name">NKE</span>
              <span class="tracking-symbol">Nike</span>
            </div>
            <div class="tracking-price" id="price-NKE">—</div>
            <div class="tracking-change-wrap" id="change-NKE">—</div>
            <div class="tracking-rsi-wrap">
              <span class="tracking-label">RSI semanal:</span>
              <span class="tracking-rsi" id="rsi-NKE">—</span>
            </div>
            <div class="tracking-status" id="status-NKE"></div>
          </div>
          <div class="tracking-card tracking-card-stock" data-symbol="UPS">
            <div class="tracking-card-header">
              <span class="tracking-asset-name">UPS</span>
              <span class="tracking-symbol">UPS</span>
            </div>
            <div class="tracking-price" id="price-UPS">—</div>
            <div class="tracking-change-wrap" id="change-UPS">—</div>
            <div class="tracking-rsi-wrap">
              <span class="tracking-label">RSI semanal:</span>
              <span class="tracking-rsi" id="rsi-UPS">—</span>
            </div>
            <div class="tracking-status" id="status-UPS"></div>
          </div>
          <div class="tracking-card tracking-card-stock" data-symbol="NVDA">
            <div class="tracking-card-header">
              <span class="tracking-asset-name">NVDA</span>
              <span class="tracking-symbol">NVIDIA</span>
            </div>
            <div class="tracking-price" id="price-NVDA">—</div>
            <div class="tracking-change-wrap" id="change-NVDA">—</div>
            <div class="tracking-rsi-wrap">
              <span class="tracking-label">RSI semanal:</span>
              <span class="tracking-rsi" id="rsi-NVDA">—</span>
            </div>
            <div class="tracking-status" id="status-NVDA"></div>
          </div>
          <div class="tracking-card tracking-card-stock" data-symbol="MA">
            <div class="tracking-card-header">
              <span class="tracking-asset-name">MA</span>
              <span class="tracking-symbol">Mastercard</span>
            </div>
            <div class="tracking-price" id="price-MA">—</div>
            <div class="tracking-change-wrap" id="change-MA">—</div>
            <div class="tracking-rsi-wrap">
              <span class="tracking-label">RSI semanal:</span>
              <span class="tracking-rsi" id="rsi-MA">—</span>
            </div>
            <div class="tracking-status" id="status-MA"></div>
          </div>
          <div class="tracking-card tracking-card-stock" data-symbol="GOOG">
            <div class="tracking-card-header">
              <span class="tracking-asset-name">GOOG</span>
              <span class="tracking-symbol">Alphabet (Google)</span>
            </div>
            <div class="tracking-price" id="price-GOOG">—</div>
            <div class="tracking-change-wrap" id="change-GOOG">—</div>
            <div class="tracking-rsi-wrap">
              <span class="tracking-label">RSI semanal:</span>
              <span class="tracking-rsi" id="rsi-GOOG">—</span>
            </div>
            <div class="tracking-status" id="status-GOOG"></div>
          </div>
          <div class="tracking-card tracking-card-stock" data-symbol="CVS">
            <div class="tracking-card-header">
              <span class="tracking-asset-name">CVS</span>
              <span class="tracking-symbol">CVS Health</span>
            </div>
            <div class="tracking-price" id="price-CVS">—</div>
            <div class="tracking-change-wrap" id="change-CVS">—</div>
            <div class="tracking-rsi-wrap">
              <span class="tracking-label">RSI semanal:</span>
              <span class="tracking-rsi" id="rsi-CVS">—</span>
            </div>
            <div class="tracking-status" id="status-CVS"></div>
          </div>
        </div>

        <h2 class="tracking-section-title">Método Geraldine Weiss</h2>
        <p class="tracking-intro">20 blue chips de dividendos: empresas con historial de pago y crecimiento de dividendos (valor por yield). Misma vista: precio, cambio diario y RSI semanal.</p>
        <div class="tracking-grid tracking-grid-stocks" id="tracking-weiss">
          <div class="tracking-card tracking-card-stock" data-symbol="JNJ"><div class="tracking-card-header"><span class="tracking-asset-name">JNJ</span><span class="tracking-symbol">Johnson & Johnson</span></div><div class="tracking-price" id="price-JNJ">—</div><div class="tracking-change-wrap" id="change-JNJ">—</div><div class="tracking-rsi-wrap"><span class="tracking-label">RSI semanal:</span><span class="tracking-rsi" id="rsi-JNJ">—</span></div><div class="tracking-status" id="status-JNJ"></div></div>
          <div class="tracking-card tracking-card-stock" data-symbol="PG"><div class="tracking-card-header"><span class="tracking-asset-name">PG</span><span class="tracking-symbol">Procter & Gamble</span></div><div class="tracking-price" id="price-PG">—</div><div class="tracking-change-wrap" id="change-PG">—</div><div class="tracking-rsi-wrap"><span class="tracking-label">RSI semanal:</span><span class="tracking-rsi" id="rsi-PG">—</span></div><div class="tracking-status" id="status-PG"></div></div>
          <div class="tracking-card tracking-card-stock" data-symbol="KO"><div class="tracking-card-header"><span class="tracking-asset-name">KO</span><span class="tracking-symbol">Coca-Cola</span></div><div class="tracking-price" id="price-KO">—</div><div class="tracking-change-wrap" id="change-KO">—</div><div class="tracking-rsi-wrap"><span class="tracking-label">RSI semanal:</span><span class="tracking-rsi" id="rsi-KO">—</span></div><div class="tracking-status" id="status-KO"></div></div>
          <div class="tracking-card tracking-card-stock" data-symbol="PEP"><div class="tracking-card-header"><span class="tracking-asset-name">PEP</span><span class="tracking-symbol">PepsiCo</span></div><div class="tracking-price" id="price-PEP">—</div><div class="tracking-change-wrap" id="change-PEP">—</div><div class="tracking-rsi-wrap"><span class="tracking-label">RSI semanal:</span><span class="tracking-rsi" id="rsi-PEP">—</span></div><div class="tracking-status" id="status-PEP"></div></div>
          <div class="tracking-card tracking-card-stock" data-symbol="XOM"><div class="tracking-card-header"><span class="tracking-asset-name">XOM</span><span class="tracking-symbol">Exxon Mobil</span></div><div class="tracking-price" id="price-XOM">—</div><div class="tracking-change-wrap" id="change-XOM">—</div><div class="tracking-rsi-wrap"><span class="tracking-label">RSI semanal:</span><span class="tracking-rsi" id="rsi-XOM">—</span></div><div class="tracking-status" id="status-XOM"></div></div>
          <div class="tracking-card tracking-card-stock" data-symbol="CVX"><div class="tracking-card-header"><span class="tracking-asset-name">CVX</span><span class="tracking-symbol">Chevron</span></div><div class="tracking-price" id="price-CVX">—</div><div class="tracking-change-wrap" id="change-CVX">—</div><div class="tracking-rsi-wrap"><span class="tracking-label">RSI semanal:</span><span class="tracking-rsi" id="rsi-CVX">—</span></div><div class="tracking-status" id="status-CVX"></div></div>
          <div class="tracking-card tracking-card-stock" data-symbol="MCD"><div class="tracking-card-header"><span class="tracking-asset-name">MCD</span><span class="tracking-symbol">McDonald's</span></div><div class="tracking-price" id="price-MCD">—</div><div class="tracking-change-wrap" id="change-MCD">—</div><div class="tracking-rsi-wrap"><span class="tracking-label">RSI semanal:</span><span class="tracking-rsi" id="rsi-MCD">—</span></div><div class="tracking-status" id="status-MCD"></div></div>
          <div class="tracking-card tracking-card-stock" data-symbol="WMT"><div class="tracking-card-header"><span class="tracking-asset-name">WMT</span><span class="tracking-symbol">Walmart</span></div><div class="tracking-price" id="price-WMT">—</div><div class="tracking-change-wrap" id="change-WMT">—</div><div class="tracking-rsi-wrap"><span class="tracking-label">RSI semanal:</span><span class="tracking-rsi" id="rsi-WMT">—</span></div><div class="tracking-status" id="status-WMT"></div></div>
          <div class="tracking-card tracking-card-stock" data-symbol="ABT"><div class="tracking-card-header"><span class="tracking-asset-name">ABT</span><span class="tracking-symbol">Abbott</span></div><div class="tracking-price" id="price-ABT">—</div><div class="tracking-change-wrap" id="change-ABT">—</div><div class="tracking-rsi-wrap"><span class="tracking-label">RSI semanal:</span><span class="tracking-rsi" id="rsi-ABT">—</span></div><div class="tracking-status" id="status-ABT"></div></div>
          <div class="tracking-card tracking-card-stock" data-symbol="ABBV"><div class="tracking-card-header"><span class="tracking-asset-name">ABBV</span><span class="tracking-symbol">AbbVie</span></div><div class="tracking-price" id="price-ABBV">—</div><div class="tracking-change-wrap" id="change-ABBV">—</div><div class="tracking-rsi-wrap"><span class="tracking-label">RSI semanal:</span><span class="tracking-rsi" id="rsi-ABBV">—</span></div><div class="tracking-status" id="status-ABBV"></div></div>
          <div class="tracking-card tracking-card-stock" data-symbol="O"><div class="tracking-card-header"><span class="tracking-asset-name">O</span><span class="tracking-symbol">Realty Income</span></div><div class="tracking-price" id="price-O">—</div><div class="tracking-change-wrap" id="change-O">—</div><div class="tracking-rsi-wrap"><span class="tracking-label">RSI semanal:</span><span class="tracking-rsi" id="rsi-O">—</span></div><div class="tracking-status" id="status-O"></div></div>
          <div class="tracking-card tracking-card-stock" data-symbol="PM"><div class="tracking-card-header"><span class="tracking-asset-name">PM</span><span class="tracking-symbol">Philip Morris</span></div><div class="tracking-price" id="price-PM">—</div><div class="tracking-change-wrap" id="change-PM">—</div><div class="tracking-rsi-wrap"><span class="tracking-label">RSI semanal:</span><span class="tracking-rsi" id="rsi-PM">—</span></div><div class="tracking-status" id="status-PM"></div></div>
          <div class="tracking-card tracking-card-stock" data-symbol="JPM"><div class="tracking-card-header"><span class="tracking-asset-name">JPM</span><span class="tracking-symbol">JPMorgan Chase</span></div><div class="tracking-price" id="price-JPM">—</div><div class="tracking-change-wrap" id="change-JPM">—</div><div class="tracking-rsi-wrap"><span class="tracking-label">RSI semanal:</span><span class="tracking-rsi" id="rsi-JPM">—</span></div><div class="tracking-status" id="status-JPM"></div></div>
          <div class="tracking-card tracking-card-stock" data-symbol="VZ"><div class="tracking-card-header"><span class="tracking-asset-name">VZ</span><span class="tracking-symbol">Verizon</span></div><div class="tracking-price" id="price-VZ">—</div><div class="tracking-change-wrap" id="change-VZ">—</div><div class="tracking-rsi-wrap"><span class="tracking-label">RSI semanal:</span><span class="tracking-rsi" id="rsi-VZ">—</span></div><div class="tracking-status" id="status-VZ"></div></div>
          <div class="tracking-card tracking-card-stock" data-symbol="T"><div class="tracking-card-header"><span class="tracking-asset-name">T</span><span class="tracking-symbol">AT&T</span></div><div class="tracking-price" id="price-T">—</div><div class="tracking-change-wrap" id="change-T">—</div><div class="tracking-rsi-wrap"><span class="tracking-label">RSI semanal:</span><span class="tracking-rsi" id="rsi-T">—</span></div><div class="tracking-status" id="status-T"></div></div>
          <div class="tracking-card tracking-card-stock" data-symbol="HD"><div class="tracking-card-header"><span class="tracking-asset-name">HD</span><span class="tracking-symbol">Home Depot</span></div><div class="tracking-price" id="price-HD">—</div><div class="tracking-change-wrap" id="change-HD">—</div><div class="tracking-rsi-wrap"><span class="tracking-label">RSI semanal:</span><span class="tracking-rsi" id="rsi-HD">—</span></div><div class="tracking-status" id="status-HD"></div></div>
          <div class="tracking-card tracking-card-stock" data-symbol="IBM"><div class="tracking-card-header"><span class="tracking-asset-name">IBM</span><span class="tracking-symbol">IBM</span></div><div class="tracking-price" id="price-IBM">—</div><div class="tracking-change-wrap" id="change-IBM">—</div><div class="tracking-rsi-wrap"><span class="tracking-label">RSI semanal:</span><span class="tracking-rsi" id="rsi-IBM">—</span></div><div class="tracking-status" id="status-IBM"></div></div>
          <div class="tracking-card tracking-card-stock" data-symbol="MMM"><div class="tracking-card-header"><span class="tracking-asset-name">MMM</span><span class="tracking-symbol">3M</span></div><div class="tracking-price" id="price-MMM">—</div><div class="tracking-change-wrap" id="change-MMM">—</div><div class="tracking-rsi-wrap"><span class="tracking-label">RSI semanal:</span><span class="tracking-rsi" id="rsi-MMM">—</span></div><div class="tracking-status" id="status-MMM"></div></div>
          <div class="tracking-card tracking-card-stock" data-symbol="SO"><div class="tracking-card-header"><span class="tracking-asset-name">SO</span><span class="tracking-symbol">Southern Company</span></div><div class="tracking-price" id="price-SO">—</div><div class="tracking-change-wrap" id="change-SO">—</div><div class="tracking-rsi-wrap"><span class="tracking-label">RSI semanal:</span><span class="tracking-rsi" id="rsi-SO">—</span></div><div class="tracking-status" id="status-SO"></div></div>
          <div class="tracking-card tracking-card-stock" data-symbol="DUK"><div class="tracking-card-header"><span class="tracking-asset-name">DUK</span><span class="tracking-symbol">Duke Energy</span></div><div class="tracking-price" id="price-DUK">—</div><div class="tracking-change-wrap" id="change-DUK">—</div><div class="tracking-rsi-wrap"><span class="tracking-label">RSI semanal:</span><span class="tracking-rsi" id="rsi-DUK">—</span></div><div class="tracking-status" id="status-DUK"></div></div>
        </div>

        <p class="tracking-footer">Crypto: Binance. Acciones: Yahoo (proxy en Netlify si despliegas ahí; si no, puede fallar por CORS). Opcional: FINNHUB_API_KEY. Actualización cada 30 s.</p>
      </div>
    </div>
  </div>
</div>

<style>
  .tracking-intro { margin-bottom: 1.5rem; color: var(--c-secondary, #666); }
  .rsi-extreme { color: #c0392b; font-weight: 600; }
  .tracking-section-title { margin-top: 2.5rem; margin-bottom: 0.5rem; font-size: 1.5rem; }
  .tracking-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
    gap: 1.5rem;
    margin: 2rem 0;
  }
  .tracking-grid-stocks { grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); }
  .tracking-card {
    border: 1px solid rgba(0,0,0,.08);
    border-radius: 12px;
    padding: 1.25rem;
    background: var(--bg_light, #f9f9f9);
  }
  .tracking-card.card-oversold {
    background: rgba(192, 57, 43, 0.12);
    border-color: rgba(192, 57, 43, 0.5);
  }
  .tracking-card.card-overbought {
    background: rgba(39, 174, 96, 0.12);
    border-color: rgba(39, 174, 96, 0.5);
  }
  .tracking-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.75rem;
  }
  .tracking-asset-name { font-weight: 600; font-size: 1.1rem; }
  .tracking-symbol { font-size: 0.85rem; color: var(--c-secondary, #888); }
  .tracking-price { font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem; }
  .tracking-price.price-up { color: #27ae60; }
  .tracking-price.price-down { color: #c0392b; }
  .tracking-change-wrap { font-size: 0.95rem; margin-bottom: 0.25rem; }
  .tracking-change-wrap.change-up { color: #27ae60; }
  .tracking-change-wrap.change-down { color: #c0392b; }
  .tracking-rsi-wrap { margin-top: 0.5rem; display: flex; align-items: baseline; flex-wrap: wrap; }
  .tracking-label { font-size: 0.9rem; color: var(--c-secondary, #666); margin-right: 0.5rem; }
  .tracking-rsi { font-weight: 700; font-size: 1.1rem; min-width: 2.5em; }
  .tracking-rsi.rsi-overbought { color: #27ae60; }
  .tracking-rsi.rsi-oversold { color: #c0392b; }
  .tracking-status { font-size: 0.8rem; margin-top: 0.5rem; min-height: 1.2em; }
  .tracking-status.overbought { color: #27ae60; font-weight: 600; }
  .tracking-status.oversold { color: #c0392b; font-weight: 600; }
  .tracking-footer { font-size: 0.85rem; color: var(--c-secondary, #888); margin-top: 2rem; }
</style>

<script>
(function() {
  const RSI_PERIOD = 14;
  const RSI_OVERBOUGHT = 70;
  const RSI_OVERSOLD = 30;
  const POLL_INTERVAL_MS = 30000;
  const FINNHUB_KEY = {{ tracking.finnhub_api_key | dump | safe }};
  const STOCK_SYMBOLS = ['LAC', 'PYPL', 'URA', 'META', 'MSTR', 'STRC', 'ORCL', 'UNH', 'NVAX', 'TSLA', 'PANW', 'AMZN', 'ASML', 'NKE', 'UPS', 'NVDA', 'MA', 'GOOG', 'CVS'];
  const WEISS_SYMBOLS = ['JNJ', 'PG', 'KO', 'PEP', 'XOM', 'CVX', 'MCD', 'WMT', 'ABT', 'ABBV', 'O', 'PM', 'JPM', 'VZ', 'T', 'HD', 'IBM', 'MMM', 'SO', 'DUK'];

  function computeRSI(closes) {
    if (!closes || closes.length < RSI_PERIOD + 1) return null;
    var changes = [];
    for (var i = 1; i < closes.length; i++) changes.push(closes[i] - closes[i - 1]);
    var avgGain = 0, avgLoss = 0;
    for (var j = 0; j < RSI_PERIOD; j++) {
      if (changes[j] > 0) avgGain += changes[j]; else avgLoss -= changes[j];
    }
    avgGain /= RSI_PERIOD;
    avgLoss /= RSI_PERIOD;
    for (var k = RSI_PERIOD; k < changes.length; k++) {
      var g = changes[k] > 0 ? changes[k] : 0;
      var l = changes[k] < 0 ? -changes[k] : 0;
      avgGain = (avgGain * (RSI_PERIOD - 1) + g) / RSI_PERIOD;
      avgLoss = (avgLoss * (RSI_PERIOD - 1) + l) / RSI_PERIOD;
    }
    if (avgLoss === 0) return 100;
    var rs = avgGain / avgLoss;
    return 100 - (100 / (1 + rs));
  }

  function formatPrice(n) {
    if (n >= 1e6) return (n / 1e6).toFixed(2) + 'M';
    if (n >= 1e3) return (n / 1e3).toFixed(2) + 'k';
    return Number(n).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 });
  }

  function safeRsi(rsi) {
    return rsi != null && typeof rsi === 'number' && Number.isFinite(rsi) ? rsi : null;
  }

  function renderCard(id, price, rsi, statusKey) {
    var cardEl = document.getElementById('card-' + id);
    var priceEl = document.getElementById('price-' + id);
    var rsiEl = document.getElementById('rsi-' + id);
    var statusEl = document.getElementById('status-' + statusKey);
    rsi = safeRsi(rsi);
    if (cardEl) {
      cardEl.classList.remove('card-overbought', 'card-oversold');
      if (rsi != null) {
        if (rsi >= RSI_OVERBOUGHT) cardEl.classList.add('card-overbought');
        else if (rsi <= RSI_OVERSOLD) cardEl.classList.add('card-oversold');
      }
    }
    if (priceEl) priceEl.textContent = price != null ? formatPrice(price) : '—';
    if (rsiEl) {
      rsiEl.textContent = rsi != null ? rsi.toFixed(1) : '—';
      rsiEl.classList.remove('rsi-overbought', 'rsi-oversold');
      if (rsi != null) {
        if (rsi >= RSI_OVERBOUGHT) rsiEl.classList.add('rsi-overbought');
        else if (rsi <= RSI_OVERSOLD) rsiEl.classList.add('rsi-oversold');
      }
    }
    if (statusEl) {
      statusEl.textContent = '';
      statusEl.classList.remove('overbought', 'oversold');
      if (rsi != null) {
        if (rsi >= RSI_OVERBOUGHT) { statusEl.textContent = 'Sobrecomprado'; statusEl.classList.add('overbought'); }
        else if (rsi <= RSI_OVERSOLD) { statusEl.textContent = 'Sobrevendido'; statusEl.classList.add('oversold'); }
      }
    }
  }

  function renderStockCard(sym, price, change, changePct, rsi) {
    var cardEl = document.querySelector('.tracking-card-stock[data-symbol="' + sym + '"]');
    var priceEl = document.getElementById('price-' + sym);
    var changeEl = document.getElementById('change-' + sym);
    var rsiEl = document.getElementById('rsi-' + sym);
    var statusEl = document.getElementById('status-' + sym);
    rsi = safeRsi(rsi);
    if (cardEl) {
      cardEl.classList.remove('card-overbought', 'card-oversold');
      if (rsi != null) {
        if (rsi >= RSI_OVERBOUGHT) cardEl.classList.add('card-overbought');
        else if (rsi <= RSI_OVERSOLD) cardEl.classList.add('card-oversold');
      }
    }
    if (priceEl) {
      priceEl.textContent = price != null ? Number(price).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 4 }) : '—';
      priceEl.classList.remove('price-up', 'price-down');
      if (change != null) priceEl.classList.add(change >= 0 ? 'price-up' : 'price-down');
    }
    if (changeEl) {
      if (change == null && changePct == null) { changeEl.textContent = '—'; changeEl.classList.remove('change-up', 'change-down'); }
      else {
        const sign = change >= 0 ? '+' : '';
        changeEl.textContent = sign + Number(change).toFixed(2) + ' (' + (changePct >= 0 ? '+' : '') + Number(changePct).toFixed(2) + '%)';
        changeEl.classList.remove('change-up', 'change-down');
        changeEl.classList.add(change >= 0 ? 'change-up' : 'change-down');
      }
    }
    if (rsiEl) {
      rsiEl.textContent = rsi != null ? rsi.toFixed(1) : '—';
      rsiEl.classList.remove('rsi-overbought', 'rsi-oversold');
      if (rsi != null) {
        if (rsi >= RSI_OVERBOUGHT) rsiEl.classList.add('rsi-overbought');
        else if (rsi <= RSI_OVERSOLD) rsiEl.classList.add('rsi-oversold');
      }
    }
    if (statusEl) {
      statusEl.textContent = '';
      statusEl.classList.remove('overbought', 'oversold');
      if (rsi != null) {
        if (rsi >= RSI_OVERBOUGHT) { statusEl.textContent = 'Sobrecomprado'; statusEl.classList.add('overbought'); }
        else if (rsi <= RSI_OVERSOLD) { statusEl.textContent = 'Sobrevendido'; statusEl.classList.add('oversold'); }
      }
    }
  }

  async function fetchBinanceKlines(symbol, limit = 20) {
    const url = 'https://api.binance.com/api/v3/klines?symbol=' + symbol + '&interval=1w&limit=' + limit;
    const res = await fetch(url);
    if (!res.ok) throw new Error(res.statusText);
    const data = await res.json();
    const closes = data.map(c => parseFloat(c[4]));
    const lastClose = closes[closes.length - 1];
    const rsi = computeRSI(closes);
    return { price: lastClose, rsi };
  }

  async function fetchYahooChart(symbol, interval, range) {
    var base = (typeof window !== 'undefined' && window.location && window.location.origin) ? window.location.origin : '';
    var serverlessUrl = base + '/.netlify/functions/yahoo-chart?symbol=' + encodeURIComponent(symbol) + '&interval=' + encodeURIComponent(interval) + '&range=' + encodeURIComponent(range);
    try {
      var res = await fetch(serverlessUrl);
      if (res.ok) return await res.json();
    } catch (e) {}
    var url = 'https://query1.finance.yahoo.com/v8/finance/chart/' + encodeURIComponent(symbol) + '?interval=' + encodeURIComponent(interval) + '&range=' + encodeURIComponent(range);
    return await fetchWithProxy(url);
  }

  async function fetchWithProxy(url) {
    var parsed;
    try {
      var res = await fetch(url);
      if (res.ok) return await res.json();
    } catch (e) {}
    var proxies = [
      'https://api.allorigins.win/raw?url=' + encodeURIComponent(url),
      'https://corsproxy.io/?' + encodeURIComponent(url)
    ];
    for (var i = 0; i < proxies.length; i++) {
      try {
        var res = await fetch(proxies[i]);
        if (!res.ok) continue;
        var text = await res.text();
        try { parsed = JSON.parse(text); } catch (e) { parsed = null; }
        if (parsed) return parsed;
      } catch (e) {}
    }
    return null;
  }

  async function fetchFinnhubQuote(symbol) {
    var url = 'https://finnhub.io/api/v1/quote?symbol=' + encodeURIComponent(symbol) + '&token=' + encodeURIComponent(FINNHUB_KEY);
    var data = await fetchWithProxy(url);
    if (!data) throw new Error('Finnhub no disponible');
    return data;
  }

  async function fetchYahooQuote(symbol) {
    try {
      var data = await fetchYahooChart(symbol, '1d', '5d');
      if (!data) return null;
      var result = data.chart && data.chart.result && data.chart.result[0];
      if (!result) return null;
      var meta = result.meta || {};
      var quote = result.indicators && result.indicators.quote && result.indicators.quote[0];
      if (!quote || !quote.close) return null;
      var closes = quote.close.filter(function(c) { return c != null; });
      if (closes.length < 2) return null;
      var c = closes[closes.length - 1];
      var pc = closes[closes.length - 2];
      var d = c - pc;
      var dp = pc ? (d / pc) * 100 : 0;
      return { c: c, pc: pc, d: d, dp: dp };
    } catch (e) {
      return null;
    }
  }

  async function fetchYahooWeeklyCloses(symbol) {
    try {
      var data = await fetchYahooChart(symbol, '1wk', '2y');
      if (!data) return null;
      var result = data.chart && data.chart.result && data.chart.result[0];
      if (!result) return null;
      var quote = result.indicators && result.indicators.quote && result.indicators.quote[0];
      if (!quote || !quote.close) return null;
      var closes = quote.close.filter(function(c) { return c != null; });
      return closes.length >= RSI_PERIOD + 1 ? closes : null;
    } catch (e) {
      return null;
    }
  }

  async function loadBTC() {
    try {
      const { price, rsi } = await fetchBinanceKlines('BTCUSDT');
      renderCard('btc', price, rsi, 'btc');
    } catch (e) {
      renderCard('btc', null, null, 'btc');
      console.warn('BTC load failed', e);
    }
  }

  async function loadGold() {
    try {
      const { price, rsi } = await fetchBinanceKlines('PAXGUSDT');
      renderCard('gold', price, rsi, 'gold');
    } catch (e) {
      renderCard('gold', null, null, 'gold');
      console.warn('Gold load failed', e);
    }
  }

  async function loadETH() {
    try {
      const { price, rsi } = await fetchBinanceKlines('ETHUSDT');
      renderCard('eth', price, rsi, 'eth');
    } catch (e) {
      renderCard('eth', null, null, 'eth');
      console.warn('ETH load failed', e);
    }
  }

  async function loadStocks() {
    for (var s = 0; s < STOCK_SYMBOLS.length; s++) {
      var sym = STOCK_SYMBOLS[s];
      try {
        var quote = null;
        if (FINNHUB_KEY) {
          try {
            quote = await fetchFinnhubQuote(sym);
          } catch (e) {}
        }
        if (!quote || quote.c == null) {
          quote = await fetchYahooQuote(sym);
        }
        var closes = await fetchYahooWeeklyCloses(sym);
        var rsi = closes ? computeRSI(closes) : null;
        var c = quote && quote.c;
        var pc = quote && quote.pc;
        var d = quote && (quote.d != null ? quote.d : (pc != null ? c - pc : null));
        var dp = quote && (quote.dp != null ? quote.dp : null);
        if (c != null) {
          renderStockCard(sym, c, d, dp, safeRsi(rsi));
        } else {
          renderStockCard(sym, null, null, null, safeRsi(rsi));
        }
      } catch (e) {
        renderStockCard(sym, null, null, null, null);
        console.warn('Stock ' + sym + ' failed', e);
      }
      await new Promise(function(r) { setTimeout(r, 300); });
    }
  }

  async function loadWeissStocks() {
    for (var s = 0; s < WEISS_SYMBOLS.length; s++) {
      var sym = WEISS_SYMBOLS[s];
      try {
        var quote = null;
        if (FINNHUB_KEY) {
          try { quote = await fetchFinnhubQuote(sym); } catch (e) {}
        }
        if (!quote || quote.c == null) quote = await fetchYahooQuote(sym);
        var closes = await fetchYahooWeeklyCloses(sym);
        var rsi = closes ? computeRSI(closes) : null;
        var c = quote && quote.c;
        var pc = quote && quote.pc;
        var d = quote && (quote.d != null ? quote.d : (pc != null ? c - pc : null));
        var dp = quote && (quote.dp != null ? quote.dp : null);
        if (c != null) renderStockCard(sym, c, d, dp, safeRsi(rsi));
        else renderStockCard(sym, null, null, null, safeRsi(rsi));
      } catch (e) {
        renderStockCard(sym, null, null, null, null);
      }
      await new Promise(function(r) { setTimeout(r, 300); });
    }
  }

  function loadAll() {
    loadBTC();
    loadGold();
    loadETH();
    loadStocks();
    loadWeissStocks();
  }

  function start() {
    loadAll();
    setInterval(loadAll, POLL_INTERVAL_MS);
  }

  if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', start);
  else start();
})();
</script>
